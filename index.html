<!DOCTYPE html>
<html>
    <head>
        <title>Noter</title>
        <!-- Add mobile awareness -->
        <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
        <!-- Connect the JS -->
        <script src="noter.js"></script>
        <!-- Load Less CSS -->
        <link rel="stylesheet/less" type="text/css" href="styles.less" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js" ></script>
        <!-- Showdown -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js"></script>

    </head>
    <body>
        <script type="text/javascript">
            function insertTextAtCursor(text) { 
                var sel, range, html; 
                sel = window.getSelection();
                range = sel.getRangeAt(0); 
                range.deleteContents(); 
                var textNode = document.createTextNode(text);
                range.insertNode(textNode);
                range.setStartAfter(textNode);
                sel.removeAllRanges();
                sel.addRange(range);        
            }
            function keyHandle(evt) {
                key = evt.keyCode;
                switch(key) {
                    case 9: //Tab
                        insertTextAtCursor('\t');
                        evt.preventDefault();
                        break
                    case 13: //Enter
                        insertTextAtCursor('\n');
                        evt.preventDefault();
                        break
                }
            }
        </script>
        <div id="header">
            <div id="name">Noter</div>
        </div>
        <div id="container">

            <div id="textbox">
                <!-- Markdown textbox -->
                <pre id="markdown" contenteditable="true" onKeyDown="keyHandle(event)" onKeyUp="save_text()"></pre>

                <!-- HTML textbox -->
                <div id="html" contenteditable="true" onKeyDown="keyHandle(event)" onKeyUp="save_text()"></div>
            </div>
            
            <!-- Buttons -->
            <div id="controls">
                <p>
                    <a href="javascript:convert_html();" class="button" id="btn_html">View as HTML</a>
                    <a href="javascript:convert_markdown();" class="button" id="btn_markdown">View as Markdown</a>
                </p>
            </div>
        </div>
        <div class="footer">
            <p title="Always Build Cool Things">ABC Things</p>
        </div>
    </body>
</html>